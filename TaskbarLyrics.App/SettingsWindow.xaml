<Window x:Class="TaskbarLyrics.App.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="TaskbarLyrics 设置"
        Width="520"
        Height="680"
        WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <Style TargetType="TextBox">
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="TextAlignment" Value="Left" />
        </Style>
        <Style TargetType="ComboBox">
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="HorizontalContentAlignment" Value="Left" />
        </Style>
    </Window.Resources>
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="16,12,16,16">
            <GroupBox Header="识别顺序" Margin="0,0,0,10">
                <StackPanel Margin="12,10,12,8">
                    <TextBlock Text="已支持：QQ音乐、网易云音乐、Spotify"
                               Margin="0,0,0,6" />
                    <TextBlock Text="拖拽列表可调整优先级。多个播放器同时播放时，按从上到下顺序优先识别。"
                               Foreground="#AAFFFFFF"
                               TextWrapping="Wrap"
                               Margin="0,0,0,8" />
                    <Border BorderThickness="1"
                            BorderBrush="#33FFFFFF"
                            CornerRadius="6"
                            Background="#12000000"
                            Padding="6">
                        <ListBox x:Name="RecognitionOrderListBox"
                                 Background="Transparent"
                                 BorderThickness="0"
                                 AllowDrop="True"
                                 PreviewMouseLeftButtonDown="RecognitionOrderListBox_PreviewMouseLeftButtonDown"
                                 PreviewMouseMove="RecognitionOrderListBox_PreviewMouseMove"
                                 DragOver="RecognitionOrderListBox_DragOver"
                                 Drop="RecognitionOrderListBox_Drop"
                                 MinHeight="110">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Border CornerRadius="4" Padding="8,6" Margin="0,2" Background="#1FFFFFFF">
                                        <DockPanel LastChildFill="True">
                                            <TextBlock Text="≡"
                                                       Width="18"
                                                       Margin="0,0,8,0"
                                                       Foreground="#BFFFFFFF"
                                                       VerticalAlignment="Center" />
                                            <TextBlock Text="{Binding DisplayName}" VerticalAlignment="Center" />
                                        </DockPanel>
                                    </Border>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </Border>
                </StackPanel>
            </GroupBox>

            <GroupBox Header="显示" Margin="0,0,0,10">
                <StackPanel Margin="12,10,12,8">
                    <CheckBox x:Name="StartupCheckBox" Content="启动时显示歌词" Margin="0,0,0,6" />
                    <CheckBox x:Name="BackgroundCheckBox" Content="显示背景" Margin="0,0,0,6" />
                    <CheckBox x:Name="BorderCheckBox" Content="显示边框" />
                </StackPanel>
            </GroupBox>

            <GroupBox Header="歌词与调试" Margin="0,0,0,10">
                <StackPanel Margin="12,10,12,8">
                    <CheckBox x:Name="LyricMismatchResolverCheckBox"
                              Content="启用歌词错配修正（预留）"
                              Margin="0,0,0,6" />
                    <CheckBox x:Name="SmtcTimelineMonitorCheckBox"
                              Content="显示 SMTC 时间轴监视器（调试）"
                              Margin="0,0,0,8" />
                    <Button Content="清除歌词缓存"
                            Width="140"
                            HorizontalAlignment="Left"
                            Click="ClearLyricCacheButton_Click" />
                </StackPanel>
            </GroupBox>

            <GroupBox Header="字体" Margin="0,0,0,10">
                <Grid Margin="12,10,12,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" Margin="0,0,8,8" Text="字号" />
                    <TextBox x:Name="FontSizeTextBox" Grid.Row="0" Grid.Column="1" Width="180" Margin="0,0,0,8" />

                    <TextBlock Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" Margin="0,0,8,8" Text="字体" />
                    <ComboBox x:Name="FontFamilyComboBox"
                              Grid.Row="1"
                              Grid.Column="1"
                              Width="180"
                              IsEditable="True"
                              IsTextSearchEnabled="True"
                              Margin="0,0,0,8" />

                    <TextBlock Grid.Row="2" Grid.Column="0" VerticalAlignment="Center" Margin="0,0,8,8" Text="字重" />
                    <ComboBox x:Name="FontWeightComboBox" Grid.Row="2" Grid.Column="1" Width="180" Margin="0,0,0,8">
                        <ComboBoxItem Content="细体" />
                        <ComboBoxItem Content="常规" />
                        <ComboBoxItem Content="中等" />
                        <ComboBoxItem Content="半粗体" />
                        <ComboBoxItem Content="粗体" />
                    </ComboBox>

                    <TextBlock Grid.Row="3" Grid.Column="0" VerticalAlignment="Center" Margin="0,0,8,0" Text="文字颜色" />
                    <TextBox x:Name="ForegroundColorTextBox" Grid.Row="3" Grid.Column="1" Width="180" />
                </Grid>
            </GroupBox>

            <GroupBox Header="窗口与布局">
                <Grid Margin="12,10,12,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" Margin="0,0,8,8" Text="背景不透明度" />
                    <TextBox x:Name="BackgroundOpacityTextBox" Grid.Row="0" Grid.Column="1" Width="180" Margin="0,0,0,8" />

                    <TextBlock Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" Margin="0,0,8,8" Text="窗口宽度（px）" />
                    <TextBox x:Name="WindowWidthTextBox" Grid.Row="1" Grid.Column="1" Width="180" Margin="0,0,0,8" />

                    <TextBlock Grid.Row="2" Grid.Column="0" VerticalAlignment="Center" Margin="0,0,8,8" Text="水平锚点" />
                    <ComboBox x:Name="AnchorComboBox" Grid.Row="2" Grid.Column="1" Width="180" Margin="0,0,0,8">
                        <ComboBoxItem Content="左侧" />
                        <ComboBoxItem Content="居中" />
                        <ComboBoxItem Content="右侧" />
                    </ComboBox>

                    <TextBlock Grid.Row="3" Grid.Column="0" VerticalAlignment="Center" Margin="0,0,8,8" Text="X 偏移（px）" />
                    <TextBox x:Name="XOffsetTextBox" Grid.Row="3" Grid.Column="1" Width="180" Margin="0,0,0,8" />

                    <TextBlock Grid.Row="4" Grid.Column="0" VerticalAlignment="Center" Margin="0,0,8,0" Text="Y 偏移（px）" />
                    <TextBox x:Name="YOffsetTextBox" Grid.Row="4" Grid.Column="1" Width="180" />
                </Grid>
            </GroupBox>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
                <Button Content="保存" Width="88" Margin="0,0,8,0" Click="SaveButton_Click" />
                <Button Content="取消" Width="88" Click="CancelButton_Click" />
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</Window>
